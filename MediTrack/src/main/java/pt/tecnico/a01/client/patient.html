<!DOCTYPE html>
<html>
<head>
    <title>Patient Record</title>
    <style>
        /* Add your custom styles here */
    </style>
</head>
<body>
    <h1>Patient Records</h1>
    
    <h2>Personal Information</h2>
    <form id="viewRecordsForm">
        <label for="patientName">Patient Name:</label>
        <input type="text" id="patientName" name="patientName" required><br><br>
        <button type="submit">View Record</button>
    </form>
    <div>
        <label for="sex">Sex:</label>
        <span id="sex"></span>
        <input type="checkbox" id="showSex" onchange="toggleField('sex')"> Disclose<br>
    </div>
    <div>
        <label for="dob">Date of Birth:</label>
        <span id="dob"></span>
        <input type="checkbox" id="showDob" onchange="toggleField('dob')"> Disclose<br>
    </div>
    <div>
        <label for="bloodtype">Bloodtype:</label>
        <span id="bloodtype"></span>
        <input type="checkbox" id="showBloodtype" onchange="toggleField('bloodtype')"> Disclose<br>
    </div>
    <div>
        <label for="allergies">Allergies:</label>
        <span id="allergies"></span>
        <input type="checkbox" id="showAllergies" onchange="toggleField('allergies')"> Disclose<br>
    </div>
    <h2>Consultation Records</h2>
    <div id="recordsContainer" style="height: 400px; overflow: auto;">
        
    </div>
    
    <script>
        function toggleField(field) {
            var element = document.getElementById(field);
            var checkbox = document.getElementById("show" + field.charAt(0).toUpperCase() + field.slice(1));
            
            if (checkbox.checked) {
                element.style.display = "inline";
            } else {
                element.style.display = "none";
            }
        }
    
        document.getElementById('viewRecordsForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const patientName = document.getElementById('patientName').value;
            fetch(API_URL + encodeURIComponent(patientName))
                .then(response => response.json())
                .then(data => {
                const recordsDiv = document.getElementById('recordsContainer');
                data.forEach(record => {
                    const recordDiv = document.createElement('div');
                    recordDiv.textContent = record;
                    recordsDiv.appendChild(recordDiv);
                });
                })
                .catch(error => console.error('Error:', error));
        });
    </script>
</body>
</html>
